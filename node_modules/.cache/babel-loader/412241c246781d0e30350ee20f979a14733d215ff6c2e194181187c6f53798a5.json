{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kali\\\\Desktop\\\\world\\\\src\\\\contexts\\\\CitiesContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useReducer, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst context = /*#__PURE__*/createContext();\nconst initialState = {\n  cities: [],\n  isLoading: false,\n  CurrentCity: {},\n  error: \"\"\n};\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"loading\":\n      return {\n        ...state,\n        isLoading: true\n      };\n    case \"cities/loaded\":\n      return {\n        ...state,\n        isLoading: false,\n        cities: action.payload\n      };\n    case \"cities/created\":\n      return {\n        ...state\n      };\n    case \"rejected\":\n      return {\n        ...state,\n        isLoading: false,\n        error: action.payload\n      };\n    case \"city/loaded\":\n      return {\n        ...state,\n        isLoading: false,\n        CurrentCity: action.payload\n      };\n    case \"cities/created\":\n      return {\n        ...state,\n        isLoading: false,\n        cities: [...state.cities, action.payload]\n      };\n    case \"cities/deleted\":\n      return {\n        ...state,\n        isLoading: false,\n        cities: state.cities.filter(city => city.id !== action.payload)\n      };\n  }\n}\nfunction CitiesProvider({\n  children\n}) {\n  _s();\n  const [{\n    cities,\n    isLoading,\n    CurrentCity\n  }, dispatch] = useReducer(reducer, initialState);\n  // const [cities , setCities] = useState([]);\n  // const [isLoading , setIsLoading] = useState(false);\n  // const [CurrentCity , setCurrentCity] = useState({});\n\n  useEffect(function () {\n    async function getData() {\n      dispatch({\n        type: \"loading\"\n      });\n      const res = await fetch(\"http://localhost:8000/cities\");\n      if (res.ok) {\n        const data = await res.json();\n        console.log(data);\n        dispatch({\n          type: \"cities/loaded\",\n          payload: data\n        });\n      } else {\n        dispatch({\n          type: \"rejected\",\n          payload: \"There was an error\"\n        });\n      }\n    }\n    getData();\n  }, []);\n  async function getCity(id) {\n    // setIsLoading(true);\n    const res = await fetch(`http://localhost:8000/cities/${id}`);\n    if (res.ok) {\n      const data = await res.json();\n      console.log(data);\n      dispatch({\n        type: \"city/loaded\",\n        payload: data\n      });\n    } else {\n      dispatch({\n        type: \"city/loaded\",\n        payload: \"there was an error loading data\"\n      });\n    }\n  }\n  async function createCity(newCity) {\n    // setIsLoading(true);\n    const res = await fetch(`http://localhost:8000/cities`, {\n      method: 'POST',\n      body: JSON.stringify(newCity),\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    });\n    if (res.ok) {\n      const data = await res.json();\n      dispatch({\n        type: \"cities/created\",\n        payload: data\n      });\n    } else {\n      alert(\"there was an error loading data\");\n    }\n  }\n  async function deleteCity(id) {\n    // setIsLoading(true);\n    const res = await fetch(`http://localhost:8000/cities/${id}`, {\n      method: 'DELETE'\n    });\n    if (res.ok) {\n      const data = await res.json();\n      dispatch({\n        type: \"cities/deleted\",\n        payload: id\n      });\n    } else {\n      alert(\"there was an error loading data\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(context.Provider, {\n    value: {\n      cities,\n      isLoading,\n      CurrentCity,\n      getCity,\n      createCity,\n      deleteCity\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n_s(CitiesProvider, \"lE4KBjDrAPUniPmAswEKqmv4yXE=\");\n_c = CitiesProvider;\nfunction useCities() {\n  _s2();\n  const contextfull = useContext(context);\n  if (context === undefined) throw new Error(\"cities context was used outside  provider\");\n  return contextfull;\n}\n_s2(useCities, \"leheCGaQOakBy7b7XgtATfO/cfM=\");\nexport { CitiesProvider, useCities };\nvar _c;\n$RefreshReg$(_c, \"CitiesProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useReducer","useState","jsxDEV","_jsxDEV","context","initialState","cities","isLoading","CurrentCity","error","reducer","state","action","type","payload","filter","city","id","CitiesProvider","children","_s","dispatch","getData","res","fetch","ok","data","json","console","log","getCity","createCity","newCity","method","body","JSON","stringify","headers","alert","deleteCity","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCities","_s2","contextfull","undefined","Error","$RefreshReg$"],"sources":["C:/Users/Kali/Desktop/world/src/contexts/CitiesContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useReducer, useState } from \"react\";\r\n\r\nconst context = createContext();\r\n\r\nconst initialState = {\r\n  cities:[],\r\n  isLoading:false,\r\n  CurrentCity:{},\r\n  error:\"\"\r\n};\r\n\r\nfunction reducer(state , action)\r\n{\r\n  switch(action.type)\r\n  {\r\n    case \"loading\":\r\n      return {...state , isLoading:true};\r\n     case \"cities/loaded\":\r\n       return {...state , isLoading:false,cities:action.payload}\r\n      case \"cities/created\":\r\n        return {...state , }\r\n      case \"rejected\":\r\n        return {...state,isLoading:false , error:action.payload}\r\n      case \"city/loaded\":\r\n        return {...state , isLoading:false , CurrentCity:action.payload}\r\n      case \"cities/created\":\r\n        return {...state , isLoading:false , cities:[...state.cities , action.payload]}\r\n      case \"cities/deleted\":\r\n        return {...state , isLoading:false , cities:state.cities.filter((city)=>city.id!==action.payload)}\r\n\r\n  }\r\n}\r\n\r\nfunction CitiesProvider({children})\r\n{\r\n\r\n  const [{cities,isLoading,CurrentCity} , dispatch] = useReducer(reducer, initialState);\r\n    // const [cities , setCities] = useState([]);\r\n    // const [isLoading , setIsLoading] = useState(false);\r\n    // const [CurrentCity , setCurrentCity] = useState({});\r\n\r\n    useEffect(function(){\r\n      async function getData()\r\n      {\r\n        dispatch({type:\"loading\"})\r\n        const res = await fetch(\"http://localhost:8000/cities\");\r\n        if(res.ok)\r\n        {\r\n          const data = await res.json();\r\n          console.log(data);\r\n          dispatch({type:\"cities/loaded\", payload:data})\r\n        }\r\n        else\r\n        {\r\n          dispatch({type:\"rejected\" , payload:\"There was an error\"});\r\n        }\r\n      }\r\n      getData();\r\n    } , [])\r\n\r\n    async function getCity(id)\r\n    {\r\n        // setIsLoading(true);\r\n        const res = await fetch(`http://localhost:8000/cities/${id}`);\r\n        if(res.ok)\r\n        {\r\n          const data = await res.json();\r\n          console.log(data);\r\n          dispatch({type:\"city/loaded\" , payload:data});\r\n        }\r\n        else\r\n        {\r\n          dispatch({type:\"city/loaded\" , payload:\"there was an error loading data\"});\r\n        } \r\n    }\r\n    async function createCity(newCity)\r\n    {\r\n        // setIsLoading(true);\r\n        const res = await fetch(`http://localhost:8000/cities` , {\r\n          method:'POST',\r\n          body:JSON.stringify(newCity),\r\n          headers:{\r\n            \"Content-type\":\"application/json\"\r\n          }\r\n        });\r\n        if(res.ok)\r\n        {\r\n          const data = await res.json();\r\n          dispatch({type:\"cities/created\" , payload:data})\r\n        }\r\n        else\r\n        {\r\n          alert(\"there was an error loading data\");\r\n        } \r\n    }\r\n    async function deleteCity(id)\r\n    {\r\n        // setIsLoading(true);\r\n        const res = await fetch(`http://localhost:8000/cities/${id}` , {\r\n          method:'DELETE'\r\n        });\r\n        if(res.ok)\r\n        {\r\n          const data = await res.json();\r\n         dispatch({type:\"cities/deleted\" , payload:id});\r\n        }\r\n        else\r\n        {\r\n          alert(\"there was an error loading data\");\r\n        } \r\n    }\r\n    return (\r\n        <context.Provider value = {{cities , isLoading , CurrentCity ,getCity , createCity , deleteCity}}>\r\n            {children}\r\n        </context.Provider>\r\n    )\r\n}\r\n\r\n\r\nfunction useCities()\r\n{\r\n    const contextfull = useContext(context);\r\n    if(context === undefined) throw new Error(\"cities context was used outside  provider\"); \r\n    return contextfull;\r\n}\r\nexport {CitiesProvider , useCities};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}